<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/style.css">
    <title>Charity Jet | Donate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

    <style>
       /* Basic body and layout styling */

       
body {
    font-family: Arial, sans-serif;
    background-color: #2e2e2e;
    color: #f1f1f1;
    margin: 0;
    padding: 0;
}

/* Navbar Styling */
nav {
    background-color: #333;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Ensure items wrap in small screens */
}

nav .logo img {
    width: 250px;
    max-width: 100%;
}

nav .nav_side {
    display: flex;
    flex-wrap: wrap;
    justify-content: center; /* Center the navigation links */
}

nav .nav_side a {
    color: #f1f1f1;
    margin: 0 15px;
    text-decoration: none;
    padding: 10px;
}

nav .nav_side a:hover {
    color: #4caf50; /* Green on hover */
}

/* Donate Section Styling */
.donate {
    text-align: center;
    padding: 50px;
    background-color: #444;
}
.modal-content input#amount {
    padding: 20px;
    width: 100%;
    background-color: #555;
    border: 2px solid #444;
    color: #fff;
    font-size: 2em;  /* Make the font larger */
    text-align: center;  /* Center the text */
    border-radius: 5px;
    margin: 10px 0;
}


.donate h1 {
    font-size: 2.5em;
    margin-bottom: 20px;
}

.donate p {
    font-size: 1.2em;
    margin-bottom: 20px;
    color: #bbb;
}

.side_btn button {
    padding: 12px 30px;
    background-color: #4caf50;
    color: #fff;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 5px;
}

.side_btn button:hover {
    background-color: #45a049;
}

/* Modal Styling */
.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.6); /* Dimmed background */
}

.modal-content {
    background-color: #333;
    margin: 10% auto;
    padding: 20px;
    border-radius: 10px;
    width: 80%; /* Adjust width for smaller screens */
    max-width: 700px; /* Maximum width */
    color: #f1f1f1;
}

.modal-content h2 {
    font-size: 2em;
    margin-bottom: 20px;
}

.modal-content input {
    padding: 10px;
    width: 100%;
    margin: 10px 0;
    background-color: #555;
    border: 1px solid #444;
    color: #fff;
}

.modal-content button {
    background-color: #4caf50;
    color: #fff;
    padding: 12px 30px;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 5px;
}

.modal-content button:hover {
    background-color: #45a049;
}

.modal-content h3 {
    font-size: 1.5em;
    margin-top: 20px;
}

.modal-content canvas {
    display: block;
    margin: 20px auto;
}

/* Close Button */
.close {
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    position: absolute;
    top: 10px;
    right: 25px;
    color: #bbb;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: #fff;
    text-decoration: none;
    cursor: pointer;
     
}

/* Footer Styling */
footer {
    background-color: #333;
    color: #f1f1f1;
    padding: 20px;
    text-align: center; /* Center text for mobile */
}

footer .pages, footer .doc, footer .contact, footer .social {
    margin-bottom: 20px;
}

footer a {
    color: #bbb;
    text-decoration: none;
}

footer a:hover {
    color: #4caf50;
}

footer hr {
    border: 1px solid #555;
}

footer p {
    text-align: center;
    font-size: 0.9em;
}

/* Button after QR Code */
#paidButton {
    background-color: #2196F3;
    color: #fff;
    padding: 12px 30px;
    font-size: 1.2em;
    border: none;
    cursor: pointer;
    margin-top: 20px;
    border-radius: 5px;
}

#paidButton:hover {
    background-color: #1976D2;
}

/* Transaction ID Input */
#transactionSection input {
    padding: 10px;
    width: 100%;
    background-color: #555;
    border: 1px solid #444;
    color: #fff;
}

/* Floating thank-you message styling */
.floating-thank-you {
    position: fixed;
    top: 20px; /* Distance from the top of the screen */
    left: 50%;
    transform: translateX(-50%);
    background-color: #4caf50;
    color: #fff;
    padding: 20px;
    font-size: 1.5em;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    z-index: 9999;
    opacity: 0;
    animation: floatIn 1s forwards, fadeOut 3s forwards 3s;
}

/* Animation for floating in */
@keyframes floatIn {
    from {
        opacity: 0;
        top: -50px;
    }
    to {
        opacity: 1;
        top: 20px;
    }
}

/* Fade out after 3 seconds */
@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    nav {
        flex-direction: column;
        align-items: flex-start;
    }

    nav .logo img {
        width: 200px; /* Adjust logo size */
    }

    nav .nav_side {
        width: 100%;
        text-align: center;
    }

    nav .nav_side a {
        margin: 10px 0;
    }

    .donate h1 {
        font-size: 2em;
    }

    .donate p {
        font-size: 1em;
    }

    .modal-content {
        width: 90%; /* Adjust modal width */
    }

    footer .pages, footer .doc, footer .contact, footer .social {
        display: block;
        margin-bottom: 10px;
    }

    footer .social {
        margin-top: 20px;
    }
}


    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav class="nav nav_top">
        <div class="logo">
            <a href="/Home"><img src="/images/logo.png" width="250"></a>
        </div>
        <div class="nav_side">
            <a href="/Home">HOME</a>
            <a href="/Home/about_us">ABOUT US</a>
            <a href="/Home/donate">DONATE</a>
            <a href="/Home/contact">CONTACT</a>
            <a href="/Home/form">FORM</a>
            <a href="/Home/beneficiaries">BENEFICIARIES</a>
        </div>
    </nav>

    <!-- DONATE SECTION -->
    <div class="donate">
        <div class="donate_container">
            <h1>Let's Make a Change Together!</h1>
            <p>The greatest use of a life is to spend it on something that will outlast it.</p>
            <p class="second">Any help or donation,<br>no matter how big or small,<br> will be whole-heartedly and deeply appreciated.</p>
            <div class="side_btn">
                <!-- Open the modal for payment input -->
                <button onclick="openModal()">DONATE NOW</button>
            </div>
        </div>
    </div>

    <!-- Modal for QR Code Generator -->
    <div id="donateModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Generate Payment QR Code</h2>
            <form id="paymentForm">
                 

                <label for="amount">Amount:</label><br>
                <input type="number" id="amount" placeholder="Enter Amount" required><br><br>

                <button type="submit">Generate QR Code</button>
            </form>
            <h3>Payment QR Code:</h3>
            <canvas id="qrcode"></canvas>

            <!-- Paid Button -->
            <div id="paidSection" style="display:none;">
                <button id="paidButton" onclick="markAsPaid()">Paid</button>
            </div>

            <!-- Transaction ID Input -->
            <div id="transactionSection" style="display:none;">
                <h3>Enter Transaction ID:</h3>
                <input type="text" id="transactionId" placeholder="Enter Transaction ID" required>
                <button onclick="submitTransaction()">Submit</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer>
        <div class="pages"> 
            <a href="http://localhost:3002/Home"><img class="aimg" src="/images/logo.png" width="250"></a> 
            <p>Charity Jet cares for needy children by empowering their caregivers to do their best work, with compassion, grace, integrity and excellence. Our end goal is to support children worldwide and see every child reach the potential that God has for them.</p>
            <a href="https://www.facebook.com/" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://www.linkedin.com/" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a>
            <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
        </div>
        <div class="doc">
            <h3>Navigation</h3>
            <a href="http://localhost:3002/Home">Home</a>
            <a href="http://localhost:3002/Home/about_us">About</a>
            <a href="http://localhost:3002/Home/donate">Donate</a>
            <a href="http://localhost:3002/Home/contact">Contact</a>
            <a href="http://localhost:3002/Home/form">Form</a>
            <a href="http://localhost:3002/Home/beneficiaries">Beneficiaries</a>
        </div>
        <div class="contact">
            <h3>Contact Us</h3>
            <a href="contact" target="_blank">IIIT(RGUKT) Basar 504107</a>
            <a href="tel: +910000000000">+91 9177014078</a>
            <a href="mailto: ppppppp@gmail.com">charityjet@gmail.com</a>
        </div>
        <div class="social">
            <h3>Support</h3>
            <p>Help us shape a better future fot children all over the world</p>
            <div class="side_btn">
                <a href="http://localhost:3002/Home/donate">JOIN US TODAY</a>
            </div>
        </div>
        <hr>
        <p>Copyright &copy; 2024 Charity Jet. All rights reserved.</p>
    </footer>

    <!-- JavaScript for Modal and QR Code -->
    <script>
        // Open modal
        function openModal() {
            document.getElementById('donateModal').style.display = 'block';
        }

        // Close modal
        function closeModal() {
            document.getElementById('donateModal').style.display = 'none';
            document.getElementById('paidSection').style.display = 'none';
            document.getElementById('transactionSection').style.display = 'none';
        }

        // Generate QR Code
        document.getElementById('paymentForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const upiId = "9177014078@ybl";
            const payeeName =  "Charity Jet"
            const amount = document.getElementById('amount').value;

            const paymentString = `upi://pay?pa=${upiId}&pn=${encodeURIComponent(payeeName)}&am=${amount}&cu=INR`;

            QRCode.toCanvas(document.getElementById('qrcode'), paymentString, function (error) {
                if (error) {
                    console.error('Error generating QR code:', error);
                } else {
                    console.log('QR code generated successfully!');
                    // Show the Paid button after QR Code generation
                    document.getElementById('paidSection').style.display = 'block';
                }
            });
        });

        // Handle "Paid" button click
        function markAsPaid() {
            document.getElementById('transactionSection').style.display = 'block';
        }



        function submitTransaction() {
    const transactionId = document.getElementById('transactionId').value;
    const amount = document.getElementById('amount').value;

    if (transactionId && amount) {
        document.getElementById('transactionSection').style.display = 'none';

        const thankYouMessage = document.createElement('div');
        thankYouMessage.classList.add('floating-thank-you');
        thankYouMessage.innerHTML = `
            <h3>Thank You for Your Generous Donation!</h3>
            <p>Your contribution is helping us make a difference. Your support is truly appreciated.</p>
        `;
        document.body.appendChild(thankYouMessage);

        fetch('/submit-donation', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ amount, transactionId })
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
            setTimeout(() => {
                window.location.href = '/Home';
            }, 3000);
        })
        .catch(error => {
            console.error('Error:', error);
        });
    } else {
        alert('Please enter both a valid amount and transaction ID.');
    }
}




    </script>
</body>
</html>
